
<!DOCTYPE html>
<html lang="en">
<head>
    <title>M100 Ground Station</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            font-family: Monospace;
            background-color: #f0f0f0;
            margin: 0px;
            overflow: hidden;
        }
    </style>

</head>
<body>

<script src="js/three.js"></script>

<script src="js/DJIObject/Camera.js"></script>
<script src="js/DJIObject/DJIMap.js"></script>
<script src="js/DJIObject/Features.js"></script>
<script src="js/DJIObject/JSON.js"></script>
<script src="js/DJIObject/Mission.js"></script>
<script src="js/DJIObject/Path.js"></script>
<script src="js/DJIObject/Recorder.js"></script>
<script src="js/DJIObject/Status.js"></script>
<script src="js/DJIObject/Template.js"></script>
<script src="js/DJIObject/WayPoint.js"></script>
<script src="js/DJIObject/OnboardSDK.js"></script>

<script src="js/controls/OrbitControls.js"></script>
<script src="js/controls/TransformControls.js"></script>
<script src="js/controls/DragControls.js"></script>
<script src="js/renderers/Projector.js"></script>
<script src="js/loaders/OBJMTLLoader.js"></script>
<script src="js/loaders/MTLLoader.js"></script>
<script src="js/geometries/TextGeometry.js"></script>
<script src="js/utils/FontUtils.js"></script>
<script src="js/fonts/helvetiker_bold.typeface.js"></script>
<script src="js/fonts/helvetiker_regular.typeface.js"></script>

<script src="js/libs/stats.min.js"></script>




<script>

    String.prototype.format = function () {

        var str = this;
        for ( var i = 0; i < arguments.length; i ++ ) {

            str = str.replace( '{' + i + '}', arguments[ i ] );

        }
        return str;

    };

    var map;
    var container, states, options;

    //22.3363168, 114.2659089
    function init(initLatitude, initLongitude) {

        container = document.createElement('div');
        document.body.appendChild(container);
        map = new DJIMap(container,initLatitude, initLongitude);

        stats = new Stats();
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.top = '0px';
        container.appendChild(stats.domElement);

        map.mission[0].loadPoint([new THREE.Vector3(0, 0, 0),
            new THREE.Vector3(289.76843686945404, 20, 56.10018915737797),
            new THREE.Vector3(-53.56300074753207, 10, -14.495472686253045),
            new THREE.Vector3(-91.40118730204415, 30, -6.958271935582161),
            new THREE.Vector3(-383.785318791128, 10, 47.869296953772746)]);

        animate();
    }

    function movedrone(x,y,z){
        //map.aircraft[0].SetPosition(new THREE.Vector3(289.76843686945404, 20, 56.10018915737797));
        map.aircraft[0].SetPosition(new THREE.Vector3(x, y, z));
    }
    function reload(){
        location.reload();
    }

    function openGS(){
        map.mission[0].openGS();
    }

    function uploadMission(){
        map.mission[0].uploadMission();
    }

    function startMission(){
        map.mission[0].startMission();
    }

    function addPoint() {
        map.mission[0].addPoint();
    }

    function removePoint(){
        map.mission[0].removePoint();
    }
    function animate() {

        requestAnimationFrame( animate );
        stats.update();
        map.controlUpdate();
        render();

    }

    function render() {

        map.rendererUpdate();

    }

</script>


</body>
</html>
